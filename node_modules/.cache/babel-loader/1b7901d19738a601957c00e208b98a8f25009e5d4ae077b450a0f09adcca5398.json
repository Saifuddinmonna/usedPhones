{"ast":null,"code":"var _jsxFileName = \"G:\\\\Web development\\\\programming hero\\\\milestone -12\\\\doctors-portal-client-module-77-5-main\\\\doctors-portal-client-module-77-5-main\\\\src\\\\Pages\\\\Appointment\\\\BookingModal\\\\BookingModal.js\",\n  _s = $RefreshSig$();\nimport { format } from 'date-fns';\nimport React, { useContext } from 'react';\nimport toast from 'react-hot-toast';\nimport { AuthContext } from '../../../contexts/AuthProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookingModal = _ref => {\n  _s();\n  let {\n    treatment,\n    setTreatment,\n    selectedDate,\n    refetch\n  } = _ref;\n  // treatment is just another name of appointmentOptions with name, slots, _id\n  const {\n    name: treatmentName,\n    slots,\n    price\n  } = treatment;\n  const date = format(selectedDate, 'PP');\n  const {\n    user\n  } = useContext(AuthContext);\n  const handleBooking = event => {\n    event.preventDefault();\n    const form = event.target;\n    const slot = form.slot.value;\n    const name = form.name.value;\n    const email = form.email.value;\n    const phone = form.phone.value;\n    // [3, 4, 5].map((value, i) => console.log(value))\n    const booking = {\n      appointmentDate: date,\n      treatment: treatmentName,\n      patient: name,\n      slot,\n      email,\n      phone,\n      price\n    };\n\n    // TODO: send data to the server\n    // and once data is saved then close the modal \n    // and display success toast\n    fetch('https://doctors-portal-server-rust.vercel.app/bookings', {\n      method: 'POST',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify(booking)\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      if (data.acknowledged) {\n        setTreatment(null);\n        toast.success('Booking confirmed');\n        refetch();\n      } else {\n        toast.error(data.message);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      id: \"booking-modal\",\n      className: \"modal-toggle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-box relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"booking-modal\",\n          className: \"btn btn-sm btn-circle absolute right-2 top-2\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold\",\n          children: treatmentName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleBooking,\n          className: \"grid grid-cols-1 gap-3 mt-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            disabled: true,\n            value: date,\n            className: \"input w-full input-bordered \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"slot\",\n            className: \"select select-bordered w-full\",\n            children: slots.map((slot, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: slot,\n              children: slot\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 56\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            type: \"text\",\n            defaultValue: user === null || user === void 0 ? void 0 : user.displayName,\n            disabled: true,\n            placeholder: \"Your Name\",\n            className: \"input w-full input-bordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"email\",\n            defaultValue: user === null || user === void 0 ? void 0 : user.email,\n            disabled: true,\n            placeholder: \"Email Address\",\n            className: \"input w-full input-bordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            type: \"text\",\n            placeholder: \"Phone Number\",\n            className: \"input w-full input-bordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"btn btn-accent w-full\",\n            type: \"submit\",\n            value: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(BookingModal, \"y3FQDew7UyrSqYkvQcTdCsLbAB8=\");\n_c = BookingModal;\nexport default BookingModal;\nvar _c;\n$RefreshReg$(_c, \"BookingModal\");","map":{"version":3,"names":["format","React","useContext","toast","AuthContext","BookingModal","treatment","setTreatment","selectedDate","refetch","name","treatmentName","slots","price","date","user","handleBooking","event","preventDefault","form","target","slot","value","email","phone","booking","appointmentDate","patient","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","acknowledged","success","error","message","map","i","displayName"],"sources":["G:/Web development/programming hero/milestone -12/doctors-portal-client-module-77-5-main/doctors-portal-client-module-77-5-main/src/Pages/Appointment/BookingModal/BookingModal.js"],"sourcesContent":["import { format } from 'date-fns';\nimport React, { useContext } from 'react';\nimport toast from 'react-hot-toast';\nimport { AuthContext } from '../../../contexts/AuthProvider';\n\nconst BookingModal = ({ treatment, setTreatment, selectedDate, refetch }) => {\n    // treatment is just another name of appointmentOptions with name, slots, _id\n    const { name: treatmentName, slots, price } = treatment;\n    const date = format(selectedDate, 'PP');\n    const { user } = useContext(AuthContext);\n\n    const handleBooking = event => {\n        event.preventDefault();\n        const form = event.target;\n        const slot = form.slot.value;\n        const name = form.name.value;\n        const email = form.email.value;\n        const phone = form.phone.value;\n        // [3, 4, 5].map((value, i) => console.log(value))\n        const booking = {\n            appointmentDate: date,\n            treatment: treatmentName,\n            patient: name,\n            slot,\n            email,\n            phone,\n            price\n        }\n\n        // TODO: send data to the server\n        // and once data is saved then close the modal \n        // and display success toast\n        fetch('https://doctors-portal-server-rust.vercel.app/bookings', {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json'\n            },\n            body: JSON.stringify(booking)\n        })\n            .then(res => res.json())\n            .then(data => {\n                console.log(data);\n                if (data.acknowledged) {\n                    setTreatment(null);\n                    toast.success('Booking confirmed');\n                    refetch();\n                }\n                else{\n                    toast.error(data.message);\n                }\n            })\n\n\n    }\n\n    return (\n        <>\n            <input type=\"checkbox\" id=\"booking-modal\" className=\"modal-toggle\" />\n            <div className=\"modal\">\n                <div className=\"modal-box relative\">\n                    <label htmlFor=\"booking-modal\" className=\"btn btn-sm btn-circle absolute right-2 top-2\">âœ•</label>\n                    <h3 className=\"text-lg font-bold\">{treatmentName}</h3>\n                    <form onSubmit={handleBooking} className='grid grid-cols-1 gap-3 mt-10'>\n                        <input type=\"text\" disabled value={date} className=\"input w-full input-bordered \" />\n                        <select name=\"slot\" className=\"select select-bordered w-full\">\n                            {\n                                slots.map((slot, i) => <option\n                                    value={slot}\n                                    key={i}\n                                >{slot}</option>)\n                            }\n                        </select>\n                        <input name=\"name\" type=\"text\" defaultValue={user?.displayName} disabled placeholder=\"Your Name\" className=\"input w-full input-bordered\" />\n                        <input name=\"email\" type=\"email\" defaultValue={user?.email} disabled placeholder=\"Email Address\" className=\"input w-full input-bordered\" />\n                        <input name=\"phone\" type=\"text\" placeholder=\"Phone Number\" className=\"input w-full input-bordered\" />\n                        <br />\n                        <input className='btn btn-accent w-full' type=\"submit\" value=\"Submit\" />\n                    </form>\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default BookingModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
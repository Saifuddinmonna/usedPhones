{"ast":null,"code":"var _jsxFileName = \"G:\\\\Web development\\\\programming hero\\\\milestone -12\\\\doctors-portal-client-module-77-5-main\\\\doctors-portal-client-module-77-5-main\\\\src\\\\Pages\\\\Appointment\\\\BookingModal\\\\BookingModal.js\",\n  _s = $RefreshSig$();\nimport { format } from \"date-fns\";\nimport React, { useContext } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { AuthContext } from \"../../../contexts/AuthProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookingModal = _ref => {\n  _s();\n  let {\n    treatment,\n    setTreatment,\n    selectedDate,\n    refetch\n  } = _ref;\n  // treatment is just another name of appointmentOptions with name, slots, _id\n  const {\n    name: treatmentName,\n    slots,\n    price\n  } = treatment;\n  const date = format(selectedDate, \"PP\");\n  const {\n    user\n  } = useContext(AuthContext);\n  const handleBooking = event => {\n    event.preventDefault();\n    const form = event.target;\n    const slot = form.slot.value;\n    const name = form.name.value;\n    const email = form.email.value;\n    const phone = form.phone.value;\n    // [3, 4, 5].map((value, i) => console.log(value))\n    const booking = {\n      appointmentDate: date,\n      treatment: treatmentName,\n      patient: name,\n      slot,\n      email,\n      phone,\n      price\n    };\n\n    // TODO: send data to the server\n    // and once data is saved then close the modal\n    // and display success toast\n    fetch(\"http://localhost:5000/bookings\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify(booking)\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      if (data.acknowledged) {\n        setTreatment(null);\n        toast.success(\"Booking confirmed\");\n        refetch();\n      } else {\n        toast.error(data.message);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"checkbox\",\n      id: \"booking-modal\",\n      className: \"modal-toggle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-box relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"booking-modal\",\n          className: \"btn btn-sm btn-circle absolute right-2 top-2\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-bold\",\n          children: treatmentName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleBooking,\n          className: \"grid grid-cols-1 gap-3 mt-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            disabled: true,\n            value: date,\n            className: \"input w-full input-bordered \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"slot\",\n            className: \"select select-bordered w-full\",\n            children: slots.map((slot, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: slot,\n              children: slot\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 9\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            type: \"text\",\n            defaultValue: user === null || user === void 0 ? void 0 : user.displayName,\n            disabled: true,\n            placeholder: \"Your Name\",\n            className: \"input w-full input-bordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"email\",\n            type: \"email\",\n            defaultValue: user === null || user === void 0 ? void 0 : user.email,\n            disabled: true,\n            placeholder: \"Email Address\",\n            className: \"input w-full input-bordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"phone\",\n            type: \"text\",\n            placeholder: \"Phone Number\",\n            className: \"input w-full input-bordered\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"btn btn-accent w-full\",\n            type: \"submit\",\n            value: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n_s(BookingModal, \"y3FQDew7UyrSqYkvQcTdCsLbAB8=\");\n_c = BookingModal;\nexport default BookingModal;\nvar _c;\n$RefreshReg$(_c, \"BookingModal\");","map":{"version":3,"names":["format","React","useContext","toast","AuthContext","BookingModal","treatment","setTreatment","selectedDate","refetch","name","treatmentName","slots","price","date","user","handleBooking","event","preventDefault","form","target","slot","value","email","phone","booking","appointmentDate","patient","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","acknowledged","success","error","message","map","i","displayName"],"sources":["G:/Web development/programming hero/milestone -12/doctors-portal-client-module-77-5-main/doctors-portal-client-module-77-5-main/src/Pages/Appointment/BookingModal/BookingModal.js"],"sourcesContent":["import { format } from \"date-fns\";\nimport React, { useContext } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { AuthContext } from \"../../../contexts/AuthProvider\";\n\nconst BookingModal = ({ treatment, setTreatment, selectedDate, refetch }) => {\n\t// treatment is just another name of appointmentOptions with name, slots, _id\n\tconst { name: treatmentName, slots, price } = treatment;\n\tconst date = format(selectedDate, \"PP\");\n\tconst { user } = useContext(AuthContext);\n\n\tconst handleBooking = (event) => {\n\t\tevent.preventDefault();\n\t\tconst form = event.target;\n\t\tconst slot = form.slot.value;\n\t\tconst name = form.name.value;\n\t\tconst email = form.email.value;\n\t\tconst phone = form.phone.value;\n\t\t// [3, 4, 5].map((value, i) => console.log(value))\n\t\tconst booking = {\n\t\t\tappointmentDate: date,\n\t\t\ttreatment: treatmentName,\n\t\t\tpatient: name,\n\t\t\tslot,\n\t\t\temail,\n\t\t\tphone,\n\t\t\tprice,\n\t\t};\n\n\t\t// TODO: send data to the server\n\t\t// and once data is saved then close the modal\n\t\t// and display success toast\n\t\tfetch(\"http://localhost:5000/bookings\", {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify(booking),\n\t\t})\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tconsole.log(data);\n\t\t\t\tif (data.acknowledged) {\n\t\t\t\t\tsetTreatment(null);\n\t\t\t\t\ttoast.success(\"Booking confirmed\");\n\t\t\t\t\trefetch();\n\t\t\t\t} else {\n\t\t\t\t\ttoast.error(data.message);\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tid=\"booking-modal\"\n\t\t\t\tclassName=\"modal-toggle\"\n\t\t\t/>\n\t\t\t<div className=\"modal\">\n\t\t\t\t<div className=\"modal-box relative\">\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor=\"booking-modal\"\n\t\t\t\t\t\tclassName=\"btn btn-sm btn-circle absolute right-2 top-2\">\n\t\t\t\t\t\tâœ•\n\t\t\t\t\t</label>\n\t\t\t\t\t<h3 className=\"text-lg font-bold\">{treatmentName}</h3>\n\t\t\t\t\t<form\n\t\t\t\t\t\tonSubmit={handleBooking}\n\t\t\t\t\t\tclassName=\"grid grid-cols-1 gap-3 mt-10\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tvalue={date}\n\t\t\t\t\t\t\tclassName=\"input w-full input-bordered \"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tname=\"slot\"\n\t\t\t\t\t\t\tclassName=\"select select-bordered w-full\">\n\t\t\t\t\t\t\t{slots.map((slot, i) => (\n\t\t\t\t\t\t\t\t<option value={slot} key={i}>\n\t\t\t\t\t\t\t\t\t{slot}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tdefaultValue={user?.displayName}\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tplaceholder=\"Your Name\"\n\t\t\t\t\t\t\tclassName=\"input w-full input-bordered\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\tdefaultValue={user?.email}\n\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\tplaceholder=\"Email Address\"\n\t\t\t\t\t\t\tclassName=\"input w-full input-bordered\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"Phone Number\"\n\t\t\t\t\t\t\tclassName=\"input w-full input-bordered\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclassName=\"btn btn-accent w-full\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tvalue=\"Submit\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default BookingModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}